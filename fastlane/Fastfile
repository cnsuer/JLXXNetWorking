desc 'LibManager ä½¿ç”¨è¿™ä¸ªèˆªé“,å¯ä»¥å¿«é€Ÿçš„å¯¹è‡ªå·±çš„ç§æœ‰åº“,è¿›è¡Œç»´æŠ¤å‡çº§'
lane :LibManager do |options|

tagVersion = options[:tag]
targetSpectName = options[:target]

#å…·ä½“è¿™ä¸ªèˆªé“æ‰§è¡Œå“ªäº›è¡Œä¸º

# 1.podinstall

cocoapods(
clean: true,
podfile: "./Example/Podfile"
)

# 2.git add .

git_add(path: ".")

#    git commit -m 'xxxxx'

git_commit(path: ".", message: "å½“å‰ç‰ˆæœ¬ç‰ˆæœ¬#{tagVersion}")

#    git push origin master

push_to_git_remote

# 3.éªŒè¯tagæ˜¯å¦å­˜åœ¨,å¦‚æœå­˜åœ¨,å› è¯¥åˆ é™¤æœ¬åœ°æ ‡ç­¾å’Œè¿œç¨‹æ ‡ç­¾
#if å­˜åœ¨æ ‡ç­¾
#   æ‰§è¡Œåˆ é™¤æœ¬åœ°/è¿œç¨‹æ ‡ç­¾
#end

if git_tag_exists(tag:tagVersion)
    UI.message("å‘ç°tag:#{tagVersion}å­˜åœ¨,å³å°†æ‰§è¡Œåˆ é™¤æ“ä½œğŸš€")
    git_remove_tag(tag:tagVersion)
end

# 4.git tag æ ‡ç­¾ç‰ˆæœ¬

add_git_tag(
tag: tagVersion
)

#    git push --tags

push_git_tags

# 5.pod spec lint

#   pod_lib_lint(allow_warnings: true)

#  6. pod repo push xxxx xxx.podspec

pod_push(path: "#{targetSpectName}.podspec", allow_warnings: true)

#pod_push(path: "#{targetSpectName}.podspec", repo: "YZGSpecs", allow_warnings: true, sources: ["https://git.coding.net/cnsuer/YZGSpecs.git", "https://github.com/CocoaPods/Specs.git"])

end
